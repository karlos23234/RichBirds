<!DOCTYPE html>
<html lang="hy">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RichRise โ ิฟีกีถีญีซีฏ</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen font-sans">

  <header class="bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4 sticky top-0">
    <div class="max-w-3xl mx-auto flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-purple-600 font-bold">R</div>
        <h1 class="text-lg font-semibold">RichRise โ ิฟีกีถีญีซีฏ</h1>
      </div>
      <div class="text-right">
        <div class="text-sm opacity-80">@User12897</div>
        <div id="headerBalance" class="text-lg font-bold">ึ8,000</div>
      </div>
    </div>
  </header>

  <main class="max-w-3xl mx-auto p-4 space-y-4">

    <!-- Balance card -->
    <section class="bg-white rounded-2xl shadow p-4">
      <div class="flex items-start justify-between">
        <div>
          <h2 class="text-gray-700 font-semibold">ิธีถีฉีกึีซีฏ ีดีถีกึีธึีค</h2>
          <div id="balanceDisplay" class="text-3xl font-bold text-green-600 mt-2">ึ8 000</div>
        </div>

        <div class="text-right">
          <div id="verifiedBadge" class="px-3 py-1 rounded-full bg-yellow-100 text-yellow-800 text-sm font-medium">ีีพีกีพีฅึีกึีพีกีฎ</div>
          <div class="mt-3 text-sm text-gray-500">ีีพีกีฆีกีฃีธึีตีถ ีบีกีฐีกีถีปี <strong>ึ80,000</strong></div>
        </div>
      </div>

      <div class="mt-4 flex gap-3">
        <button onclick="openDeposit()" class="flex-1 bg-blue-600 text-white py-2 rounded-lg font-semibold hover:bg-blue-700">๐ณ ิผีซึึีกีพีธึีฅีฌ</button>
        <button onclick="openWithdraw()" class="flex-1 bg-red-600 text-white py-2 rounded-lg font-semibold hover:bg-red-700">๐ธ ีีกีถีฅีฌ</button>
        <button onclick="startManualVerify()" class="px-3 py-2 border rounded-lg text-sm">๐ ีีกีพีฅึีกึีถีฅีฌ TXID-ีธีพ</button>
      </div>

      <p class="mt-3 text-sm text-gray-600">
        ิพึีกีฃีซึ. ีบีกึีฟีกีคีซึ <strong>ีฌีซึึีกีพีธึีดีกีถ ีถีพีกีฆีกีฃีธึีตีถีจ ึ2,500</strong>ี ีฐีกีทีพีซ ีกีฏีฟีซีพีกึีดีกีถ ึ ีดีกึีค-ีนีซ-ีจ ีผีธีขีธีฟ ีฝีฟีธึีฃีดีกีถ ีฐีกีดีกึึ
        ีีกีถีดีกีถ ีดีซีถีซีดีธึีดีจี <strong>ึ150,000</strong> (ีฉีธึีตีฌีกีฟึีพีธึีด ีดีซีกีตีถ ีพีกีพีฅึีกึีพีกีฎ ึีฃีฟีกีฟีฅึีฅึีซ ีฐีกีดีกึ)ึ
      </p>
    </section>

    <!-- Verification helper -->
    <section id="verifyInfo" class="bg-white rounded-2xl shadow p-4 hidden">
      <h3 class="font-semibold text-gray-800">ีีกีพีฅึีกึีถีฅีฌ ีฟึีกีถีฝีฏึีซีกีถี ีฝีฟีธึีฃีดีกีถ ีฐีกีดีกึ</h3>
      <p class="text-sm text-gray-600 mt-1">ิตีฉีฅ ีคีธึึ ีกึีคีฅีถ ีฏีกีฟีกึีฅีฌ ีฅึ ีฌีซึึี ีดีธึีฟึีกีฃึีฅึ ีฟึีกีถีฝีฏึีซีกีตีซ TXID-ีจ (ึึ.ี Tron/TRC20 TXID).</p>
      <div class="mt-3 flex gap-2">
        <input id="txInput" class="flex-1 border rounded-lg px-3 py-2" placeholder="ีีพีฅึ TXID (ึึ.)">
        <button onclick="submitTxForVerify()" class="bg-indigo-600 text-white px-4 py-2 rounded-lg">ิฑีดึีธึีฅีฌ</button>
        <button onclick="closeVerifyInfo()" class="px-3 py-2 border rounded-lg">ีีกีฏีฅีฌ</button>
      </div>
      <p class="mt-2 text-sm text-gray-500">(ีีทีธึีด. ีถีฅึีฏีกีตีธึีดี ึีกีถีฏีกึีกีฎ ีธีน-ึีกีฏ txID ีฏีดีกึีฏีซ ีธึีบีฅีฝ ีพีกีพีฅึ)</p>
    </section>

    <!-- First-payment / progress -->
    <section class="bg-white rounded-2xl shadow p-4">
      <h3 class="font-semibold text-gray-800">ิฑีผีกีปีซีถ ีฐีกีทีพีกึีฏีซ ีบีกีฐีกีถีป</h3>
      <div class="mt-2">
        <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
          <div id="progressBar" class="h-3 bg-green-500 rounded-full" style="width: 10%"></div>
        </div>
        <div class="mt-2 text-sm text-gray-600" id="progressText">8000 / 80000</div>
      </div>
    </section>

    <!-- Transaction history -->
    <section class="bg-white rounded-2xl shadow p-4">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold text-gray-800">ีีณีกึีธึีดีถีฅึีซ ีดีกีฟีตีกีถ</h3>
        <div class="text-sm text-gray-500">ิฑีดีฝีกีฉีซีพี ีชีกีดีกีถีกีฏีธีพ</div>
      </div>

      <div id="txList" class="mt-3 space-y-2"></div>

      <div id="noTx" class="mt-3 text-sm text-gray-500">ีีฅึ ีฐีกีทีพีกึีฏีถีฅึีซ ีดีกีฝีซีถ ีฃึีกีผีธึีดีถีฅึ ีนีฏีกีถึ</div>
    </section>

  </main>

  <script>
    const MIN_DEPOSIT = 2500;
    const MIN_WITHDRAW = 150000;
    const FIRST_TARGET = 80000;

    const LS_BALANCE = 'rr_balance';
    const LS_TX = 'rr_transactions';
    const LS_VERIFIED = 'rr_verified';

    function initDefaults() {
      if (!localStorage.getItem(LS_BALANCE)) localStorage.setItem(LS_BALANCE,'8000');
      if (!localStorage.getItem(LS_TX)) localStorage.setItem(LS_TX,'[]');
      if (!localStorage.getItem(LS_VERIFIED)) localStorage.setItem(LS_VERIFIED,'false');
    }

    function fmt(num){ return Number(num).toLocaleString('hy-AM'); }

    function showToast(msg, timeout=2200){
      const t=document.createElement('div');
      t.className='fixed left-1/2 -translate-x-1/2 top-24 bg-black text-white px-4 py-2 rounded-lg shadow z-50';
      t.textContent=msg; document.body.appendChild(t);
      setTimeout(()=>{t.style.opacity='0'; setTimeout(()=>t.remove(),300);},timeout);
    }

    function updateUI(){
      const balance=parseInt(localStorage.getItem(LS_BALANCE)||0,10);
      document.getElementById('balanceDisplay').innerText=`ึ${fmt(balance)}`;
      document.getElementById('headerBalance').innerText=`ึ${fmt(balance)}`;
      const verified = localStorage.getItem(LS_VERIFIED) === 'true';
      const badge=document.getElementById('verifiedBadge');
      badge.innerText = verified ? 'ีีกีพีฅึีกึีพีกีฎ' : 'ีีพีกีพีฅึีกึีพีกีฎ';
      badge.className = verified ? 'px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm font-medium'
                                 : 'px-3 py-1 rounded-full bg-yellow-100 text-yellow-800 text-sm font-medium';
      const percent=Math.min(Math.round((balance/FIRST_TARGET)*100),100);
      document.getElementById('progressBar').style.width=percent+'%';
      document.getElementById('progressText').innerText=`${fmt(balance)} / ${fmt(FIRST_TARGET)}`;
      renderTxList();
    }

    function loadTx(){ try{return JSON.parse(localStorage.getItem(LS_TX)||'[]')}catch(e){return[]}}
    function saveTx(arr){localStorage.setItem(LS_TX,JSON.stringify(arr))}
    function addTransaction({type,amount,note='',txid=null}){
      const arr=loadTx();
      arr.unshift({id:Date.now(),type,amount:Number(amount),note,txid,time:new Date().toISOString()});
      saveTx(arr); updateUI();
    }

    function renderTxList(){
      const arr=loadTx();
      const wrapper=document.getElementById('txList'); wrapper.innerHTML='';
      if(!arr||arr.length===0){document.getElementById('noTx').style.display='block'; return;}
      document.getElementById('noTx').style.display='none';
      arr.forEach(tx=>{
        const el=document.createElement('div');
        el.className='border rounded-lg p-3 flex justify-between items-start';
        el.innerHTML=`<div><div class="text-sm text-gray-600">${new Date(tx.time).toLocaleString()}</div>
        <div class="font-semibold ${tx.type==='deposit'?'text-green-600':'text-red-600'} mt-1">
        ${tx.type==='deposit'?'ิผีซึึีกีพีธึีธึีด':'ีีกีถีธึีด'} โ ึ${fmt(tx.amount)}</div>
        <div class="text-xs text-gray-500 mt-1">${tx.note||''}${tx.txid?' โข TXID: '+tx.txid:''}</div></div>
        <div class="text-right text-xs"><div class="text-gray-500">${tx.id}</div></div>`;
        wrapper.appendChild(el);
      })
    }

    function openDeposit(){
      const input=prompt(`ีีธึีฟึีกีฃึีฅึ ีฌีซึึีกีพีธึีดีกีถ ีฃีธึีดีกึีจ (ีถีพีกีฆีกีฃีธึีตีถ ึ${MIN_DEPOSIT})`,MIN_DEPOSIT);
      if(input===null)return;
      const amount=parseInt(input.replace(/\s+/g,''),10);
      if(isNaN(amount)||amount<=0){showToast







