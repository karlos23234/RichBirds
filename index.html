<!doctype html>
<html lang="hy">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rich Birds ‚Äî Telegram Web App</title>
  <style>
    :root{--bg:#f6f7fb;--card:#fff;--accent:#4CAF50;--muted:#6c757d}
    body{font-family:Inter,system-ui,Segoe UI,Arial;margin:0;background:#f8fafc;color:#222}
    .wrap{max-width:420px;margin:20px auto;padding:18px}
    .card{background:var(--card);border-radius:14px;padding:14px;margin-top:14px;box-shadow:0 6px 18px rgba(16,24,40,0.06);}
    .btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:linear-gradient(90deg,var(--accent),#2eb67d);color:#fff}
    .small{font-size:13px;color:var(--muted)}
    .wallet-box{font-family:monospace;background:#f4f6f8;padding:10px;border-radius:8px;word-break:break-all}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üê¶ Rich Birds</h1>
    <div class="card">
      <div class="small">’Å’•÷Ä ’¥’∂’°÷Å’∏÷Ä’§’®</div>
      <div id="balance" style="font-size:22px;font-weight:700">0 ÷è</div>
      <div style="margin-top:10px">
        <button id="depositBtn" class="btn btn-primary">‘±’æ’°’∂’§</button>
        <button id="withdrawBtn" class="btn">’é’•÷Ä÷Å’∂’•’¨</button>
      </div>
    </div>

    <div class="card" id="depositCard" style="display:none;">
      <div class="small">USDT TRC20 ’∞’°’Ω÷Å’•</div>
      <div class="wallet-box" id="usdtAddr">TWzZVoKptLx3KJfshfmkNnFtC3kY2LVi4M</div>
      <input id="txid" placeholder="‘≥÷Ä’´÷Ä Tx ID" style="width:100%;margin-top:10px;padding:8px;border-radius:8px;border:1px solid #ccc" />
      <button id="submitTx" class="btn btn-primary" style="margin-top:10px;">I've paid</button>
      <div id="depositMsg" style="margin-top:8px;color:#555"></div>
    </div>

    <div class="card" id="withdrawCard" style="display:none;">
      <div class="small">’Ü’æ’°’¶’°’£’∏÷Ç’µ’∂’® 1000 ÷è ÷á ’°’º’∂’æ’°’¶’∂ 1000÷è ’°’æ’°’∂’§’æ’°’Æ</div>
      <input id="withdrawAmount" placeholder="‘≥’∏÷Ç’¥’°÷Ä (÷è)" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-top:10px" />
      <input id="withdrawAddr" placeholder="’Å’•÷Ä Tron ’∞’°’Ω÷Å’•’∂" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ccc;margin-top:10px" />
      <button id="submitWithdraw" class="btn btn-primary" style="margin-top:10px;">’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∫’°’∞’°’∂’ª</button>
      <div id="withdrawMsg" style="margin-top:8px;color:#555"></div>
    </div>
  </div>

  <script>
    const API = "https://YOUR_BACKEND_URL/api"; // ÷É’∏’≠’´÷Ä ÷Ñ’∏ backend domain-’∏’æ
    const MIN = 1000;

    async function refresh(){
      const r = await fetch(API+'/user-info');
      const j = await r.json();
      if(j.ok) document.getElementById('balance').textContent = j.balance + ' ÷è';
    }

    document.getElementById('depositBtn').onclick = ()=>{document.getElementById('depositCard').style.display='block';}
    document.getElementById('withdrawBtn').onclick = ()=>{document.getElementById('withdrawCard').style.display='block';}

    document.getElementById('submitTx').onclick = async ()=>{
      const tx = document.getElementById('txid').value.trim();
      if(!tx){alert('‘≥÷Ä’•÷Ñ Tx ID');return;}
      const r = await fetch(API+'/verify-trx',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({txid:tx})});
      const j = await r.json();
      document.getElementById('depositMsg').textContent = j.message || j.error;
      refresh();
    };

    document.getElementById('submitWithdraw').onclick = async ()=>{
      const amt = parseInt(document.getElementById('withdrawAmount').value,10);
      const addr = document.getElementById('withdrawAddr').value.trim();
      if(isNaN(amt)||amt<MIN){alert('’Ü’æ’°’¶’°’£’∏÷Ç’µ’∂’® 1000÷è');return;}
      const body={user_id:1,amount:amt,to_address:addr};
      const r=await fetch(API+'/withdraw',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});
      const j=await r.json();
      document.getElementById('withdrawMsg').textContent = j.message||j.error;
      refresh();
    };

    refresh();
  </script>
</body>
</html>

